<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Sistem Perpustakaan - SMAN 2 CIKARANG BARAT</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white; margin: 0; padding: 0; }
            @page { size: A4 landscape; margin: 5mm; }

            .print-label-grid { 
                display: grid !important; 
                grid-template-columns: repeat(4, 1fr); 
                grid-template-rows: repeat(3, 1fr);
                width: 287mm; height: 200mm; gap: 2mm;
            }
            .label-tight { 
                border: 1px solid black; display: flex; flex-direction: row; 
                align-items: center; padding: 2mm; height: 64mm; page-break-inside: avoid;
            }

            .print-card-grid { 
                display: grid !important; 
                grid-template-columns: repeat(3, 1fr); 
                width: 287mm; height: 200mm; gap: 5mm;
            }
            .card-tight { 
                width: 88mm; height: 195mm; border: 1px solid black; 
                padding: 4mm; position: relative; font-family: 'Courier New', monospace;
                page-break-inside: avoid; overflow: hidden;
            }
            
            .qr-card-bottom { 
                position: absolute; 
                bottom: 3mm; 
                left: 4mm; 
                width: 50px; 
                height: 50px;
                background: white;
            }
            .qr-card-bottom img, .qr-card-bottom canvas { 
                width: 50px !important; 
                height: 50px !important; 
            }

            .header-kartu { text-align: center; font-weight: bold; border-bottom: 2px double black; margin-bottom: 4px; font-size: 8.5pt; line-height: 1.1; }
            .info-table { width: 100%; font-size: 8pt; margin-bottom: 3px; border: none; line-height: 1.1; }
            .info-table td { border: none !important; padding: 0 !important; text-align: left !important; vertical-align: top; }
        }

        #printAreaLabel, #printAreaKartu { display: none; }
        .tab-btn.active { border-bottom: 4px solid #2563eb; color: #2563eb; font-weight: bold; }
        
        table.minimalist { width: 100%; border-collapse: collapse; margin-top: 2px; font-size: 7.5pt; }
        table.minimalist th, table.minimalist td { 
            border: 1px solid black; 
            padding: 0px 2px; 
            text-align: center; 
            height: 16.5px; 
            line-height: 1; 
        }
        table.minimalist th { background-color: #f3f4f6; font-size: 6.5pt; }
        
        .search-input { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #ddd; margin-bottom: 15px; outline: none; }
    </style>
</head>
<body class="bg-slate-50">

    <div id="login-section" class="flex items-center justify-center min-h-screen no-print">
        <div class="bg-white p-8 rounded-2xl shadow-xl w-full max-w-sm border">
            <h2 class="text-2xl font-bold mb-6 text-center text-blue-700 uppercase">Admin Login</h2>
            <div class="space-y-4">
                <input type="text" id="userInput" placeholder="User" class="w-full p-4 border rounded-xl outline-none">
                <input type="password" id="pwdInput" placeholder="Password" class="w-full p-4 border rounded-xl outline-none">
                <button onclick="auth()" class="w-full bg-blue-600 text-white font-bold py-4 rounded-xl">MASUK</button>
            </div>
        </div>
    </div>

    <div id="main-dashboard" class="hidden no-print min-h-screen">
        <nav class="bg-white border-b p-4 flex justify-between items-center sticky top-0 z-10">
            <h1 class="font-bold text-blue-800">PERPUS SMAN 2 CIKARANG BARAT</h1>
            <div class="flex space-x-6">
                <button onclick="showTab('buku')" id="tab-buku" class="tab-btn active px-2 py-1">Cetak Buku</button>
                <button onclick="showTab('anggota')" id="tab-anggota" class="tab-btn px-2 py-1">Cetak Anggota</button>
            </div>
        </nav>

        <div id="view-buku" class="p-6 max-w-6xl mx-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-lg font-bold">Data Buku</h2>
                <div class="space-x-2">
                    <button onclick="cetakLabel12()" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold">CETAK 12 LABEL</button>
                    <button onclick="cetakKartuBuku()" class="bg-emerald-600 text-white px-6 py-2 rounded-lg font-bold">CETAK KARTU BUKU</button>
                </div>
            </div>
            <input type="text" id="searchBuku" onkeyup="filterBuku()" placeholder="Cari judul atau kode buku..." class="search-input">
            <div class="bg-white rounded-xl border overflow-x-auto">
                <table class="w-full text-left font-mono text-sm">
                    <thead class="bg-slate-50 border-b">
                        <tr>
                            <th class="p-4 w-12 text-center"><input type="checkbox" onchange="toggle('.cb-buku', this)"></th>
                            <th class="p-4">KODE BUKU</th>
                            <th class="p-4">JUDUL BUKU</th>
                        </tr>
                    </thead>
                    <tbody id="list-buku" class="divide-y"></tbody>
                </table>
